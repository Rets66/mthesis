\section{評価}
\label{sec:evaluation}
%評価基準
%Fialure Resilience, Performance(Latency, Misconfiguration, Load Balance)
%サービスとして要求されるもの
% Resolution response time
% Resolution Accuracy
% Resolution guarantee
% Resolution fairness
%
%システムとして要求されるもの
% スケーラビリティ
% マネージビリティ
% Deployed System
% Fault Torrelance
%
%セキュリティ
% アクセシビリティ
% Aurhontication
% Data Confidentialy
% プライバシー保護
% ロバストネス
% ネットワークプライバシー
%どのような評価手法によって，何を明らかにするのか
本章では，提案システム上でランダム長のドメイン名をトンネリング通信と仮定して動作させることによって，フラットな名前空間と権威サーバの機能分割という提案システムに使われている提案手法がトンネリング抑止として機能することを明らかにする．
また，既存システムとの比較に基づいたシミュレーションテストにより，名前解決速度・トラフィック量などの特性を明らかにする．

トンネリング抑止の機能評価テストでは，フルサービスリゾルバとマネージャおよびプロバイダをPython3を用いて実装し，それらサービスをDockerのコンテナとして動作させることによって，提案システムにおける名前解決環境を再現したプロトタイプを用いた．
また，DNSトンネリングの通信には，ランダムなドメイン名をdigコマンドを用いることによって再現した．
プロトタイプ上におけるdigコマンドによる擬似トンネリング通信について，プロバイダにデータが転送されないことを確認する．
特性評価では，ランダムな名前解決クエリを用意し，既存のDNSと提案システムの両方で問い合わせた際のトラフィックと名前解決の速度について，統計的に評価を実施する．
%はじめに，提案システムのフルサービスリゾルバが満たす機能の要素は，以下の通りである．
%\begin{itemize}
% \item スタブリゾルバからの名前解決クエリに対して，コンテンツIDとドメイン名IDを算出する機能
% \item コンテンツIDに基づき，マネージャを探索する機能
% \item スタブリゾルバからの名前解決クエリをSORESのフォーマットに変換させ，マネージャに転送する機能
% \item マネージャからの応答パケットをDNSのフォーマットに変換させ，送信元のスタブリゾルバに転送する機能
%\end{itemize}
%
%以上の機能を提供するサービスのアルゴリズムを以下のように設計した．
%
%\input{algorithm/full-service}
%%このアルゴリズムの説明は，本来提案手法の章で動作説明中に述べるべきであろう．
%% フルサービスリゾルバとプロバイダをいかにして判別するのか
%
%\begin{description}
% \item[マネージャ]\mbox{}
%  \begin{itemize}
%   \item プロバイダからのコンテンツストアリクエストに対して，コンテンツIDを探索し担当マネージャノードにコンテンツ保持をリクエストする機能
%   \item コンテンツを管理するためのデータベースを保持する機能
%   \item フルリゾルバからの名前解決クエリに対して，そのコンテンツIDに一致するコンテンツを探索し応答する機能
%  \end{itemize}
% \item [プロバイダ]\mbox{}
%  \begin{itemize}
%   \item コンテンツに対して操作する機能
%  \end{itemize}
%\end{description}

\subsection{DNSトンネリング}
\label{sec:eval-tunnel}
\subsubsection{環境}
検証環境には，Dockerを使用し，コンテナ同士の接続によってDNSのチェーンを実現する．
その概略図は，以下の通りである．

%擬似DNSトンネリングとするドメイン名については，過去の文字列分布が均等分布になることに基づいてランダムな関数で作成したこと理論について説明すること

%提案システム上で，iodineを動作させた際のパケットキャプチャーした様子を説明する
\subsubsection{DNS Exfiltration}
本項では，提案システムのDNS Exfiltrationへの機能性について評価した結果を述べる．
評価には，実装したシステムを
%\subsubsection{DNS Infiltration}


\subsection{要素ごとの特性}
\label{sec:eval-feature}
本節では，DNSとの比較評価に基づいた提案手法の特性について説明する．
提案システムと既存システムの名前解決における差分には，表~\ref{tab:diff_sores_dns}のようなものが予想される．
\input{table/diff_sores_dns}


\begin{description}
 \setlength{\itemsep}{0pt}
 \setlength{\leftskip}{1.0cm}
 \item[RTT:] 名前解決の速度
 \item[トラフィック量:] ネットワーク全体への影響度
\end{description}

上記の特性に関する評価にあたり，従来のDNSトラフィックのデータセットと提案システムにおける名前解決時のトラフィックデータセットを用意した．
これらデータセットについて，統計アプローチに基づいて，評価を行った結果を示す．

SORESでは，スタブリゾルバからの名前解決クエリのうち，そのヘッダー情報に基づき識別子を算出することで，この識別子に関連づけられたレコード情報を操作する仕組みに基づき名前解決機能が動作する．
DNSでは，ゾーンをドメインごとに分割し，フルサービスリゾルバはルート権威サーバから目的の権威サーバに向かって再帰的に問い合わせ，権威サーバのアドレスを解決しながら，最終的にコンテンツを保持する権威サーバからコンテンツを取得する．
既存のDNSとSORESの特性を表~\ref{tab:diff_sores_dns}に示す．


から識別子に基づき，コンテンツを保持するサーバに名前解決リクエストを投げる．
SORESは，フルサービスリゾルバにてスタブリゾルバから問い合わせられた名前解決命令に基づきレコード情報の識別子を算出する．
この識別子に基づき，フルサービスリゾルバからは，1ホップでコンテンツを保持するサーバに問い合わせる仕組みで動作する．
\subsubsection{RTT(Round Trip Time)}
本項では，SORESが識別子から一意にレコード情報にアクセス可能である点について，DNSとの比較評価を行う．
SORESの名前解決では，
従来のDNSでは，ラベルごとにゾーンが移譲されている場合，レコード情報を保持するノードまでのホップ数はラベル数nに比例する．
それに対して，SORESでは，識別子から一意にレコード情報を保持するマネージャノードを特定できるので，常にホップ数は2である．
このため，既存の名前解決システムより速度の向上が期待される．
% 実装の必要はない
% 既存のDNSにおけるラウンドトリップのうち，再帰問い合わせの最後の権威サーバRTTがSORESのフルリゾルバとマネージャのそれになる．
% 遠いものと近いもののRTTを用意する必要がある
\subsubsection{パケットサイズ}
% 実装する必要はない．理論で評価できる
% あえてするとすれば，フルサービスリゾルバとマネージャ間通信
% DDoSへの影響については，リクエストとレスポンスパケットのサイズからアンプ率に着目する
% アンプ率は，既存のDNSと基本的に変わらない．DNSSECがあるかないかについて議論するくらい
SORESでは，56byteを固定長とするコンテンツIDをシンボルとすることによって，レコード情報にアクセスする．
この仕組みの影響で，SORESのパケットは従来のパケットと比較して肥大する特性がある．
このため，送信元を目的ホストと偽装することで目的ホストの計算リソースを圧迫するDDoS攻撃に対して，脅威を高める可能性が予想される．
\subsubsection{トラフィック量}
% SORESについては，実装の必要性はない
% ただし，DNSについてトラフィックデータを収集する必要がある
% 必要なデータ
% * 一定期間のSORESトラフィック
% * 同一期間のDNSトラフィック
% 比較項目
% * 平均したドメイン長と
本項では，提案手法におけるトラフィックについて評価する．
評価において，
SORESでは，シンボル志向の名前解決メソッドによって，既存の再帰問い合わせによるメソッドよりも少ないトラフィックに抑えることが期待される．
SORESでは，クエリ数とトラフィック量は比例関係にある．
他方で，新たにマネージャ間通信という従来にはないトラフィックが発生する．
本項では，これトラフィックがネットワーク全体にどの程度影響を及ぼすのかについて評価する．
% マネージャが攻撃された場合の影響は，世界規模に影響する．
% 従来のドメインごとにゾーンが分離している設計と違い，一つのゾーンには様々な組織のドメインが管理されている．
% このゾーンを全て書き換えることができることは脅威である．

